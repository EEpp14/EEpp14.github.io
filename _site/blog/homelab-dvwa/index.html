<!-- This layout is used in all pages. Making changes here will efect all pages. We recommend not to change anything here. --> <!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><link rel="dns-prefetch" href="//fonts.googleapis.com" /><link rel="dns-prefetch" href="//google-analytics.com" /><link rel="dns-prefetch" href="//www.google-analytics.com" /><link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com" /><link rel="dns-prefetch" href="//ajax.googleapis.com" /><link rel="dns-prefetch" href="//fonts.gstatic.com" /><link rel="dns-prefetch" href="https://.disqus.com/" /><title>VMWare Pro Homelab DVWA Setup on Ubuntu Server | My Portfolio</title><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="VMWare Pro Homelab DVWA Setup on Ubuntu Server" /><meta name="author" content="Ethan Epperson" /><meta property="og:locale" content="en_US" /><meta name="description" content="Installing Dependencies" /><meta property="og:description" content="Installing Dependencies" /><link rel="canonical" href="https://eepp14.github.io/blog/homelab-dvwa/" /><meta property="og:url" content="https://eepp14.github.io/blog/homelab-dvwa/" /><meta property="og:site_name" content="My Portfolio" /><meta property="og:image" content="https://eepp14.github.io/assets/images/thumbnails/homelab/Homelab-setup-guide-dvwa.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-01-12T00:00:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://eepp14.github.io/assets/images/thumbnails/homelab/Homelab-setup-guide-dvwa.jpg" /><meta property="twitter:title" content="VMWare Pro Homelab DVWA Setup on Ubuntu Server" /><script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Ethan Epperson"},"dateModified":"2024-01-12T00:00:00-05:00","datePublished":"2024-01-12T00:00:00-05:00","description":"Installing Dependencies","headline":"VMWare Pro Homelab DVWA Setup on Ubuntu Server","image":"https://eepp14.github.io/assets/images/thumbnails/homelab/Homelab-setup-guide-dvwa.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://eepp14.github.io/blog/homelab-dvwa/"},"url":"https://eepp14.github.io/blog/homelab-dvwa/"}</script><link rel="stylesheet" href="/assets/css/main-default.css" /><link id="color-scheme" rel="stylesheet" href="/assets/css/main-default.css" /><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/apple-icon-60x60.png" /><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-icon-114x114.png" /><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/apple-icon-152x152.png" /><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/android-icon-192x192.png" /><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /><link rel="icon" href="/favicon.ico" type="image/x-icon" /><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" ></script><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script></head><body><div class="loader"><div class="lds-ring"><div></div><div></div><div></div><div></div></div></div><div class="wrapper"><div class="container-grid"><div class="sidebar"><div class="author-container shadow"><div class="author"> <a href="/"> <img src="/assets/images/headshots/professional-hs.jpg" width="100%" height="auto;" alt="My Portfolio"loading="lazy" /> </a></div><div class="about text-center"><h1 class="title"><a href="/">Ethan Epperson</a></h1></div><div class="bio text-center"><p class="m0">Cybersecurity Student | Let's Defend Together</p></div><hr class="dashed"><div class="social text-center"> <ul class="portfolio p0"> <li><a href="/projects/">Projects</a></li> <li><a href="/blog/">Blog</a></li> <li><a href="/contact/">Contact</a></li> </ul> <ul class="sm p0 m0a"> <li><a href="https://www.linkedin.com/in/ethan-epperson-8608b5277"><i class="fa fa-linkedin"></i></a></li> <li><a href="https://www.github.com/EEpp14"><i class="fa fa-github"></i></a></li> </ul></div></div></div><div class="main"><div class="main-container shadow"><div class="title-space"> <h1>VMWare Pro Homelab | DVWA Setup on Ubuntu Server</h1><div class="input-group mb-3" data-aos="zoom-in"> <input type="text" class="form-control border-right-0" id="search-input" /><div class="input-group-append"> <span class="input-group-text" ><i class="fa fa-search"></i ></span></div></div></div><hr class="dashed" /> <main> <ul class="breadcrumbs"> <li><a href="/">Home</a></li> <li> <a href="/blog" >Blog</a > </li> <li> <a href="#" >Homelab dvwa</a > </li> </ul><div class="meta" data-aos="fade-up"> <p> <small> <span> <i class="fa fa-calendar" aria-hidden="true"></i> 12 Jan 2024&nbsp; </span> <span> <i class="fa fa-user" aria-hidden="true"></i> Ethan Epperson&nbsp; </span> <span> <i class="fa fa-clock-o" aria-hidden="true"></i> 5 mins read. </span> </small> </p></div><div class="featured-image rounded shadow" style="background-image: url(/assets/images/thumbnails/homelab/Homelab-setup-guide-dvwa.jpg)" data-aos="zoom-in" ></div><div class="container"> <article> <ul class="toc"> <li><a href="#installing-dependencies">Installing Dependencies</a></li> <li><a href="#config-file--database-creation">Config File &amp; Database Creation</a></li> <li><a href="#accessing-dvwa-from-kali--final-touches">Accessing DVWA From Kali &amp; Final Touches</a></li> </ul> <h2 id="installing-dependencies">Installing Dependencies</h2> <p>In this part, we will be going over how to setup DVWA on the ubuntu server within the isolated network and accessing the application through Kali Linux. First, we need to login to the machine and make sure we have root privileges through ‘sudo su’. We should have all of our packages updated from before so we can skip that step. We are going to need to download some dependencies as per the DVWA github page. The command for obtaining those dependencies is listed below.</p><pre><code class="language-unix">apt install php apache2 mariadb-server php-mysqli php-gd libapache2-mod-php
</code></pre><p>Now we need to get to the directory where we will be cloning the DVWA git repository. Enter the following commands:</p><pre><code class="language-unix">cd ..
cd ..
cd var/www/html/
git clone https://github.com/digininja/DVWA
</code></pre><p><img src="/assets/images/homelab/dvwa-setup/dvwa-gitclone.jpg" alt="DVWA Git Clone" /></p> <p>First we should remove the default ‘index.html’ file that is made when we installed apache2 so it isn’t loaded over DVWA.</p><pre><code class="language-unix">rm index.html
</code></pre><p>At this point we can add the DVWA vm to our alias of vulnerable machines so that outbound connections are blocked at this point. We will no longer need an outbound connection except for periodic updates at which point we can remove DVWA from the alias briefly so that it’s not affected by the ‘Vuln_VMs’ firewall rule. You could also choose to create a rule that is disabled by default that allows outbound connections from the DVWA machine and only toggle it on when those updates need to be made.</p> <p><img src="/assets/images/homelab/dvwa-setup/alias-changed.jpg" alt="DVWA Added to Alias" /></p> <h2 id="config-file--database-creation">Config File &amp; Database Creation</h2> <p>Now that we have the repository cloned, we should be able to see the structure of the website after we cd into it. After that, we need to alter the template file so enter the following commands:</p><pre><code class="language-unix">cd DVWA/
cd config/
nano config.inc.php.dist
</code></pre><p><img src="/assets/images/homelab/dvwa-setup/dvwa-config.jpg" alt="DVWA Config Path" /></p> <p>We can change a few things in the file if we so wish, such as the database name or username. I wouldn’t recommend changing the password as it’s already a vulnerable application and we don’t really need to do that. We can leave the port alone as well. The security level should be changed to reflect the difficulty we want to tackle when trying to penetrate the application. The only other three settings to worry about are the security level, authentication, and recaptcha. I will be setting the security level to ‘low’ to begin with. Disable authentication should be set to ‘true’.</p> <p>As for recaptcha, we need to go to the <a href="https://www.google.com/recaptcha/admin">url</a> specified within the file to generate the keys. Give it a label and choose ‘Challenge (v2)’ and the ‘I’m not a robot Checkbox’ options as this is what’s recommended for DVWA. I’m using the loopback domain. Feel free to choose whatever you want. Once the public/private key pair is generated then we can paste them into the file on the VM. Your config file should look like the image below. Write and save the file.</p> <p><img src="/assets/images/homelab/dvwa-setup/dvwa-nano.jpg" alt="DVWA Config Nano" /></p> <p>In truth, what we just did is edit a template, so we need to copy the contents of the .dist file to that of an actual config file with the following command:</p><pre><code class="language-unix">cp config/config.inc.php.dist config/config.inc.php
</code></pre><p>We must create a database and database user so enter the following commands (some of mine fail because I’ve already run them, but yours should be fine):</p><pre><code class="language-unix">mariadb
create database dvwa;
create user dvwa@localhost identified by 'p@ssw0rd';
grant all on dvwa.* to dvwa@localhost;
flush privileges;
exit;
</code></pre><h2 id="accessing-dvwa-from-kali--final-touches">Accessing DVWA From Kali &amp; Final Touches</h2> <p>Now that our server is in working order, navigate to Kali Linux and open your browser. Navigate to ‘https://10.0.12.2’. You will see the DVWA index with a folder icon, click on it and you will be sent to the homepage for DVWA. On the DVWA homepage, click on ‘Setup/Reset DB’. Click the ‘Create / Reset Database’ button. You will also notice some PHP functions are disabled as well as two directories we need to make writeable in order for everything to function correctly. We will remedy these issues right now.</p> <p><img src="/assets/images/homelab/dvwa-setup/dvwa-setuppage.jpg" alt="DVWA Config Setup Page" /></p> <p>Execute the following commands as root in the root directory:</p><pre><code class="language-unix">chmod 777 /var/www/html/DVWA/hackable/uploads/
chmod 777 /var/www/html/DVWA/config
</code></pre><p>You can verify the permissions by entering the following commands:</p><pre><code class="language-unix">ls -ld /var/www/html/DVWA/hackable/uploads/
ls -ld /var/www/html/DVWA/config
</code></pre><p><img src="/assets/images/homelab/dvwa-setup/dvwa-permissions.jpg" alt="DVWA Config Permissions" /></p> <p>As noted before there are three php functions that are red. We only need to really worry about changing ‘PHP function allow_url_include’. We will need to change the php.ini directory to enable this function. Execute the below commands as root in the root directory. In the nano editor navigate to the ‘fopen wrappers’ section and change the permission for ‘PHP function allow_url_include’ to ‘On’. Write to file, save, and exit the editor.</p><pre><code class="language-unix">cd etc/php/8.1/apache2
nano php.ini
</code></pre><p><img src="/assets/images/homelab/dvwa-setup/dvwa-allowurl.jpg" alt="DVWA Config php.ini" /></p> <p>We need to restart the server now for these changes to take effect. Once it’s rebooted, jump back over to Kali and refresh the DVWA page. We should now see the changes have taken effect. If your screen looks the image below, then congrats, you’re all done setting up DVWA!</p> <table> <tbody> <tr> <td>we will move on to setting up our Windows Server 2019 VM and making the active directory forest. You can find the next part, ‘VMWare Pro Homelab</td> <td>Active Directory Forest Setup Pt. 1’, in the [blog] section of this site.</td> </tr> </tbody> </table> </article></div><hr class="dashed" /><div class="container"><div class="row"><div class="col-md-12"> <p class="categories" data-aos="fade-up"> <span ><a href="/categories/#blog" >Blog</a ></span > </p></div></div><div class="recent" data-aos="fade-up"><div class=""> <h3>Recent Articles</h3></div><div class="recent-grid"><div class="items" data-aos="fade-up"> <a class="nostyle item" href="/blog/homelab-wazuh/"><div class="cards"><div class="image rounded" style="background-image: url(/assets/images/thumbnails/homelab/Homelab-setup-guide-wazuh.jpg)" ></div><p class="title"><small>VMWare Pro Homelab | Monitoring Suricata/Windows Logs With Wazuh</small></p></div></a></div><div class="items" data-aos="fade-up"> <a class="nostyle item" href="/blog/homelab-suricata/"><div class="cards"><div class="image rounded" style="background-image: url(/assets/images/thumbnails/homelab/Homelab-setup-guide-suricata.jpg)" ></div><p class="title"><small>VMWare Pro Homelab | Suricata Setup on pfSense with Snort Alerts</small></p></div></a></div><div class="items" data-aos="fade-up"> <a class="nostyle item" href="/blog/homelab-ad-forest-pt.2/"><div class="cards"><div class="image rounded" style="background-image: url(/assets/images/thumbnails/homelab/Homelab-setup-guide-windows.jpg)" ></div><p class="title"><small>VMWare Pro Homelab | Active Directory Forest Setup pt. 2</small></p></div></a></div><div class="items" data-aos="fade-up"> <a class="nostyle item" href="/blog/homelab-ad-forest/"><div class="cards"><div class="image rounded" style="background-image: url(/assets/images/thumbnails/homelab/Homelab-setup-guide-windows.jpg)" ></div><p class="title"><small>VMWare Pro Homelab | Active Directory Forest Setup pt. 1</small></p></div></a></div></div></div></div></main><div id="search-container"></div><hr class="dashed" /><footer data-aos="fade-up"><div class="text-right"> <p class="copy"> <i class="fa fa-at"></i> 2018 <a class="rev" href="/">Blackcurrant</a> </p></div></footer></div></div></div></div><script src="/assets/js/jQuery.min.js"></script><script> $(document).ready(function () { $(".loader").hide(); });</script><script> (function () { var css = document.createElement("link"); css.href = "/assets/font-awesome-4.7.0/css/font-awesome.min.css"; css.rel = "stylesheet"; css.type = "text/css"; document.getElementsByTagName("head")[0].appendChild(css); })();</script><noscript><link rel="stylesheet" href="/assets/font-awesome-4.7.0/css/font-awesome.min.css" /> </noscript><script> $("#search-input").keyup(function () { $("main").hide(); $("search-container").show(); if (!$("#search-input").val()) { $("main").show(); $("search-container").hide(); } });</script><script src="/assets/js/jekyll-search.min.js"></script><script> SimpleJekyllSearch({ searchInput: document.getElementById("search-input"), resultsContainer: document.getElementById("search-container"), searchResultTemplate: '<a class="nostyle" href="{url}"><div class="blog borders cards"><div class="image" style="background-image: url({image});"></div><div class="content"><h3 class="title">{title}</h3><p class="description">{description}</p></div></div></a>', noResultsText: "No results found", json: "/search.json", });</script><script> (function () { var css = document.createElement("link"); css.href = "https://unpkg.com/aos@2.3.1/dist/aos.css"; css.rel = "stylesheet"; css.type = "text/css"; document.getElementsByTagName("head")[0].appendChild(css); })();</script><noscript><link rel="stylesheet" href="/assets/animate-on-scroll/aos.min.css" /> </noscript><script src="/assets/animate-on-scroll/aos.min.js"></script><script> AOS.init({ duration: 600, once: true, disable: "mobile", });</script></body></html>